<?xml version="1.0" encoding="UTF-8"?>
<protocol name="zigen">
  <copyright>Apache-2.0</copyright>

  <interface name="zgn_compositor" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_compositor.adoc"/>

    <request name="create_virtual_object">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_compositor.adoc#create_virtual_object"/>
      <arg name="id" type="new_id" interface="zgn_virtual_object"/>
    </request>
  </interface>

  <interface name="zgn_data_offer" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc"/>

    <enum name="error">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#error"/>
      <entry name="invalid_finish" value="0"/>
      <entry name="invalid_action_mask" value="1"/>
      <entry name="invalid_action" value="2"/>
      <entry name="invalid_offer" value="3"/>
    </enum>

    <request name="accept">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#accept"/>
      <arg name="serial" type="uint"/>
      <arg name="mime_type" type="string" allow-null="true"/>
    </request>

    <request name="receive">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#receive"/>
      <arg name="mime_type" type="string"/>
      <arg name="fd" type="fd"/>
    </request>

    <request name="destroy" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#destroy"/>
    </request>

    <event name="offer">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#offer"/>
      <arg name="mime_type" type="string"/>
    </event>

    <request name="finish">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#finish"/>
    </request>

    <request name="set_actions">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#set_actions"/>
      <arg name="dnd_actions" type="uint" enum="zgn_data_device_manager.dnd_action"/>
      <arg name="preferred_action" type="uint" enum="zgn_data_device_manager.dnd_action"/>
    </request>

    <event name="source_actions">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#source_actions"/>
      <arg name="source_actions" type="uint" enum="zgn_data_device_manager.dnd_action"/>
    </event>

    <event name="action">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_offer.adoc#action"/>
      <arg name="dnd_action" type="uint" enum="zgn_data_device_manager.dnd_action"/>
    </event>
  </interface>

  <interface name="zgn_data_source" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc"/>

    <enum name="error">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#error"/>
      <entry name="invalid_action_mask" value="0"/>
      <entry name="invalid_source" value="1"/>
    </enum>

    <request name="offer">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#offer"/>
      <arg name="mime_type" type="string"/>
    </request>

    <request name="destroy" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#destroy"/>
    </request>

    <event name="target">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#target"/>
      <arg name="mime_type" type="string" allow-null="true"/>
    </event>

    <event name="send">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#send"/>
      <arg name="mime_type" type="string"/>
      <arg name="fd" type="fd"/>
    </event>

    <event name="cancelled">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#cancelled"/>
    </event>

    <request name="set_actions">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#set_actions"/>
      <arg name="dnd_actions" type="uint" enum="zgn_data_device_manager.dnd_action"/>
    </request>

    <event name="dnd_drop_performed">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#dnd_drop_performed"/>
    </event>

    <event name="dnd_finished">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#dnd_finished"/>
    </event>

    <event name="action">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_source.adoc#action"/>
      <arg name="dnd_action" type="uint" enum="zgn_data_device_manager.dnd_action"/>
    </event>
  </interface>

  <interface name="zgn_data_device" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc"/>

    <enum name="error">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#error"/>
      <entry name="role" value="0"/>
    </enum>

    <request name="set_length">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#set_length"/>
      <arg name="serial" type="uint" summary="enter serial"/>
      <arg name="length" type="fixed"/>
    </request>

    <request name="start_drag">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#start_drag"/>
      <arg name="source" type="object" interface="zgn_data_source" allow-null="true"/>
      <arg name="origin" type="object" interface="zgn_virtual_object"/>
      <arg name="icon" type="object" interface="zgn_virtual_object" allow-null="true"/>
      <arg name="serial" type="uint"/>
    </request>

    <event name="data_offer">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#data_offer"/>
      <arg name="id" type="new_id" interface="zgn_data_offer"/>
    </event>

    <event name="enter">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#enter"/>
      <arg name="serial" type="uint"/>
      <arg name="virtual_object" type="object" interface="zgn_virtual_object"/>
      <arg name="origin" type="array" summary="vec3"/>
      <arg name="direction" type="array" summary="vec3"/>
      <arg name="id" type="object" interface="zgn_data_offer" allow-null="true"/>
    </event>

    <event name="leave">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#leave"/>
    </event>

    <event name="motion">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#motion"/>
      <arg name="time" type="uint"/>
      <arg name="origin" type="array" summary="vec3"/>
      <arg name="direction" type="array" summary="vec3"/>
    </event>

    <event name="drop">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#drop"/>
    </event>

    <request name="release" type="destructor">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device.adoc#release"/>
    </request>
  </interface>

  <interface name="zgn_data_device_manager" version="1">
    <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device_manager.adoc"/>

    <request name="create_data_source">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device_manager.adoc#create_data_source"/>
      <arg name="id" type="new_id" interface="zgn_data_source"/>
    </request>

    <request name="get_data_device">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device_manager.adoc#get_data_device"/>
      <arg name="id" type="new_id" interface="zgn_data_device"/>
      <arg name="seat" type="object" interface="zgn_seat"/>
    </request>

    <enum name="dnd_action" bitfield="true">
      <description summary="https://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_data_device_manager.adoc#dnd_action"/>
      <entry name="none" value="0"/>
      <entry name="copy" value="1"/>
      <entry name="move" value="2"/>
      <entry name="ask" value="4"/>
    </enum>
  </interface>

  <interface name="zgn_virtual_object" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_virtual_object.adoc"/>

    <request name="destroy" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_virtual_object.adoc#destroy"/>
    </request>

    <request name="commit">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_virtual_object.adoc#commit"/>
    </request>

    <request name="frame">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_virtual_object.adoc#frame"/>
      <arg name="callback" type="new_id" interface="wl_callback"/>
    </request>
  </interface>

  <interface name="zgn_seat" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_seat.adoc"/>

    <enum name="capability" bitfield="true">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_seat.adoc#capability"/>
      <entry name="ray" value="1"/>
      <entry name="keyboard" value="2"/>
    </enum>

    <enum name="error">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_seat.adoc#error"/>
      <entry name="missing_capability" value="0"/>
    </enum>

    <event name="capabilities">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_seat.adoc#capabilities"/>
      <arg name="capabilities" type="uint" enum="capability"/>
    </event>

    <request name="get_ray">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_seat.adoc#get_ray"/>
      <arg name="id" type="new_id" interface="zgn_ray"/>
    </request>

    <request name="get_keyboard">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_seat.adoc#get_keyboard"/>
      <arg name="id" type="new_id" interface="zgn_keyboard"/>
    </request>

    <request name="release" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_seat.adoc#release"/>
    </request>
  </interface>

  <interface name="zgn_ray" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc"/>

    <request name="set_length">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#set_length"/>
      <arg name="serial" type="uint" summary="enter serial"/>
      <arg name="length" type="fixed"/>
    </request>

    <event name="enter">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#enter"/>
      <arg name="serial" type="uint"/>
      <arg name="virtual_object" type="object" interface="zgn_virtual_object"/>
      <arg name="origin" type="array" summary="vec3"/>
      <arg name="direction" type="array" summary="vec3"/>
    </event>

    <event name="leave">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#leave"/>
      <arg name="serial" type="uint"/>
      <arg name="virtual_object" type="object" interface="zgn_virtual_object"/>
    </event>

    <event name="motion">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#motion"/>
      <arg name="time" type="uint"/>
      <arg name="origin" type="array" summary="vec3"/>
      <arg name="direction" type="array" summary="vec3"/>
    </event>

    <enum name="button_state">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#button_state"/>
      <entry name="released" value="0"/>
      <entry name="pressed" value="1"/>
    </enum>

    <event name="button">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#button"/>
      <arg name="serial" type="uint"/>
      <arg name="time" type="uint"/>
      <arg name="button" type="uint"/>
      <arg name="state" type="uint" enum="button_state"/>
    </event>

    <enum name="axis">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#axis-enum"/>
      <entry name="vertical_scroll" value="0"/>
      <entry name="horizontal_scroll" value="1"/>
    </enum>

    <event name="axis">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#axis-event"/>
      <arg name="time" type="uint" summary="with millisecond granularity"/>
      <arg name="axis" type="uint" enum="axis" />
      <arg name="value" type="fixed" />
    </event>

    <request name="release" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#release"/>
    </request>

    <event name="frame">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#frame"/>
    </event>

    <event name="axis_discrete">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_ray.adoc#axis_discrete"/>
      <arg name="axis" type="uint" enum="axis"/>
      <arg name="discrete" type="int"/>
    </event>
  </interface>

  <interface name="zgn_keyboard" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc"/>

    <enum name="keymap_format">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc#keymap_format"/>
      <entry name="no_keymap" value="0"/>
      <entry name="xkb_v1" value="1"/>
    </enum>

    <event name="keymap">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc#keymap"/>
      <arg name="format" type="uint" enum="keymap_format"/>
      <arg name="fd" type="fd"/>
      <arg name="size" type="uint"/>
    </event>

    <event name="enter">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc#enter"/>
      <arg name="serial" type="uint"/>
      <arg name="virtual_object" type="object" interface="zgn_virtual_object"/>
      <arg name="keys" type="array"/>
    </event>

    <event name="leave">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc#leave"/>
      <arg name="serial" type="uint"/>
      <arg name="virtual_object" type="object" interface="zgn_virtual_object"/>
    </event>

    <enum name="key_state">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc#key_state"/>
      <entry name="released" value="0"/>
      <entry name="pressed" value="1"/>
    </enum>

    <event name="key">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc#key"/>
      <arg name="serial" type="uint"/>
      <arg name="time" type="uint"/>
      <arg name="key" type="uint"/>
      <arg name="state" type="uint" enum="key_state"/>
    </event>

    <event name="modifiers">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc#modifiers"/>
      <arg name="serial" type="uint"/>
      <arg name="mods_depressed" type="uint"/>
      <arg name="mods_latched" type="uint"/>
      <arg name="mods_locked" type="uint"/>
      <arg name="group" type="uint"/>
    </event>

    <request name="release" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen/zgn_keyboard.adoc#release"/>
    </request>
  </interface>
</protocol>
